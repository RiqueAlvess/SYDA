<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Data SAAS{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/css/styles.css">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Navbar incluída apenas se não for a homepage e não for página de login/signup -->
    {% if request.path != '/' and request.path != '/accounts/login/' and request.path != '/accounts/signup/' %}
    {% include 'includes/navbar.html' %}
    {% endif %}

    {% block content %}{% endblock %}
    
    <!-- Footer customizado para a página inicial -->
    {% if request.path == '/' %}
    {% block footer %}{% endblock %}
    {% endif %}

    <!-- Overlay de carregamento global -->
    <div id="loading-overlay" style="display: none;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Carregando...</span>
        </div>
        <div class="mt-2">Processando...</div>
    </div>
    
    <!-- Toast para notificações -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 5">
        <div id="notification-toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <strong class="me-auto" id="toast-title">Notificação</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="toast-message">
                <!-- Mensagem dinâmica -->
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Funções globais úteis
        
        // Exibir o overlay de carregamento
        function showLoading() {
            document.getElementById('loading-overlay').style.display = 'flex';
        }
        
        // Ocultar o overlay de carregamento
        function hideLoading() {
            document.getElementById('loading-overlay').style.display = 'none';
        }
        
        // Exibir uma notificação toast
        function showToast(title, message, type = 'success') {
            const toastEl = document.getElementById('notification-toast');
            const toastTitle = document.getElementById('toast-title');
            const toastMessage = document.getElementById('toast-message');
            
            // Configurar conteúdo
            toastTitle.textContent = title;
            toastMessage.innerHTML = message;
            
            // Configurar cor com base no tipo
            toastEl.className = `toast text-white bg-${type}`;
            
            // Exibir o toast
            const toast = new bootstrap.Toast(toastEl, {
                autohide: true,
                delay: 5000
            });
            toast.show();
        }
        
        // Formatar datas
        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }
        
        // Formatar moeda (R$)
        function formatCurrency(value) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(value);
        }
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>